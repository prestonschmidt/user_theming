<?php

use Drupal\user\Entity;









/**
 ** Add user display mode template suggestions.
**/

function user_theming_theme_suggestions_user(array $variables) {
    return [
        'user__' . $variables['elements']['#view_mode']
    ];
}









/**
 ** Add user template files to the theme.
**/

function user_theming_theme($existing, $type, $theme, $path) {
    
    return [
        'user__full' => [
          'template' => 'user--full',
          'base hook' => 'user',
        ],
        'user__compact' => [
          'template' => 'user--compact',
          'base hook' => 'user',
        ],
        'user__token' => [
          'template' => 'user--token',
          'base hook' => 'user',
        ],
      ];
    
}









/**
 ** Add styles library.
**/

function user_theming_preprocess_page(&$variables) {
    
    $config = \Drupal::config('user_theming.user_theming_settings');
    $useModuleStylesRadio = $config->get('use_module_styles');
    
    if ($useModuleStylesRadio != 'no') {
        $variables['#attached']['library'][] = 'user_theming/styles';
    }
    
}









function user_theming_preprocess_user(&$variables) {
    
    $config = \Drupal::config('user_theming.user_theming_settings');
    $variables['showActiveSessionMark'] = $config->get('show_active_session_mark');

    if ($variables['elements']['#user']->access->value > (time() - 800)) {
        $variables['activeUserMark'] = 1;
    }
    else {
        $variables['activeUserMark'] = 0;
    }
    
}










?>